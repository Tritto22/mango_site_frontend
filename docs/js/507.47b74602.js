"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[507],{507:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("section",[t.errorProp||t.delatedSucces||null==t.painting?e("div",[e("Loader")],1):e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row pt-4"},[e("div",{staticClass:"col"},[e("nav",{staticClass:"d-flex justify-content-end"},[e("button",{staticClass:"btn btn-warning mx-4",attrs:{type:"button"},on:{click:function(e){return t.shareData(t.painting,"admin-painting-update")}}},[t._v("Modifica")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.deleteSelectedPainting(t.painting)}}},[t._v("Elimina")])])])]),t.painting.favorite?e("div",{staticClass:"row p-4"},[e("div",{staticClass:"col"},[e("font-awesome-icon",{staticClass:"favorite",attrs:{icon:["fas","star"]}})],1)]):t._e(),e("div",{staticClass:"row p-4"},[e("div",{staticClass:"col"},[e("h2",[t._v("Titolo => "),e("span",[t._v(t._s(t.painting.title.toUpperCase()))])])])]),e("div",{staticClass:"row p-4"},[e("div",{staticClass:"col"},[e("h2",[t._v("File Immagine => ")]),e("div",{staticClass:"d-flex justify-content-center"},[null!=t.painting.imageDataBase64?e("img",{attrs:{alt:t.painting.title,src:t.painting.imageDataBase64},on:{error:function(e){return t.handleImageError(t.painting)}}}):t._e()])])]),null!=t.painting.details&&this.painting.details.length>0?e("div",{staticClass:"row p-4"},t._l(t.painting.details,(function(a,s){return e("div",{key:s,staticClass:"col"},[e("h2",[t._v("Dettaglio "+t._s(s+1)+" => ")]),e("div",{staticClass:"d-flex justify-content-center"},[e("img",{attrs:{alt:a.name,src:a.imageBase64}})])])})),0):t._e(),e("div",{staticClass:"row p-4"},[e("div",{staticClass:"col"},[e("h2",[t._v("Misure => "),e("span",[t._v(t._s(t.painting.size))])])])]),e("div",{staticClass:"row p-4"},[e("div",{staticClass:"col"},[e("h2",[t._v("Anno => "),e("span",[t._v(t._s(t.painting.year))])])])]),e("div",{staticClass:"row p-4"},[e("div",{staticClass:"col"},[e("h2",[t._v("Descrizione => "),e("span",[t._v(t._s(t.painting.description))])])])]),e("div",{staticClass:"row p-4"},[e("div",{staticClass:"col"},[e("h2",[t._v("Slug => "),e("span",[t._v(t._s(t.painting.slug))])])])])]),t.errorProp?e("div",{staticClass:"alert-danger text-center"},[e("h3",[t._v("Impossibile visualizzare il quadro selezionato, tornare alla Dashboard e riprovare.")])]):t._e(),t.delatedSucces?e("div",{staticClass:"alert-success text-center"},[e("h3",[t._v("Eliminazione avvenuta con successo")])]):t._e()])},i=[],n=a(908),r=a(188),o={name:"ReadPainting",components:{Loader:r.Z},data(){return{painting:null,errorProp:!1,delatedSucces:!1}},computed:{currentUser(){return this.$store.state.auth.user}},created(){null!=this.$route.params.slug?this.loadData(this.$route.params.slug):this.errorProp=!0},mounted(){this.currentUser||this.$router.push("/admin/login")},methods:{loadData(t){n.Z.getSinglePainting(t).then((t=>{this.painting=t.data.payload}),(t=>{console.log("Errore:",t),t.response&&403===t.response.status&&(this.$store.dispatch("auth/logout"),this.$router.push("/admin/login"))}))},shareData(t,e){this.$router.push({name:e,params:{slug:t.slug}})},deleteSelectedPainting(t){n.Z.delete(t).then((t=>{this.delatedPainting=t.data.payload,this.delatedSucces=!0}),(t=>{console.log("Errore:",t),t.response&&403===t.response.status&&(this.$store.dispatch("auth/logout"),this.$router.push("/admin/login"))}))},handleImageError(t){t.img="http://drive.google.com/uc?export=view&id=1ZpJCY7ijNY1oO1mvGMl2gnOcaIXyGM3n"}}},l=o,d=a(1),c=(0,d.Z)(l,s,i,!1,null,null,null),u=c.exports},908:function(t,e,a){var s=a(121),i=a(8);const n="https://www.simonetritto.site/api/admin/";s.Z.defaults.headers.common["Access-Control-Allow-Origin"]="*",s.Z.defaults.headers.common["Access-Control-Allow-Headers"]="Origin, X-Requested-With, Content-Type, Accept",s.Z.defaults.crossDomain=!0;class r{newPainting(t){return""!==t.title&&t.year>=1993&&t.year<=2199?s.Z.post(n+"addPainting",t,{headers:(0,i.Z)()}):Promise.reject("I dati del quadro non sono validi. Il titolo e l'anno non possono essere vuoti.")}getDashboard(t,e){return s.Z.get(`${n}dashboard?pageNumber=${t}&pageSize=${e}`,{headers:(0,i.Z)()})}getSinglePainting(t){return s.Z.get(`${n}single-view?slug=${t}`,{headers:(0,i.Z)()})}update(t){return""!==t.title&&t.year>=1993&&t.year<=2199?s.Z.put(n+"update",t,{headers:(0,i.Z)()}):Promise.reject("I dati del quadro non sono validi.")}delete(t){if(null!=t.slug)return s.Z.delete(n+"delete",{data:t,headers:(0,i.Z)()})}}e.Z=new r}}]);
//# sourceMappingURL=507.47b74602.js.map