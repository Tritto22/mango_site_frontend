"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[507],{507:function(t,a,e){e.r(a),e.d(a,{default:function(){return u}});var s=function(){var t=this,a=t._self._c;return a("section",[t.errorProp||t.delatedSucces||null==t.painting?a("div",[a("Loader")],1):a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row pt-4"},[a("div",{staticClass:"col"},[a("nav",{staticClass:"d-flex justify-content-end"},[a("button",{staticClass:"btn btn-warning mx-4",attrs:{type:"button"},on:{click:function(a){return t.shareData(t.painting,"admin-painting-update")}}},[t._v("Modifica")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(a){return t.deleteSelectedPainting(t.painting)}}},[t._v("Elimina")])])])]),t.painting.favorite?a("div",{staticClass:"row p-4"},[a("div",{staticClass:"col"},[a("font-awesome-icon",{staticClass:"favorite",attrs:{icon:["fas","star"]}})],1)]):t._e(),a("div",{staticClass:"row p-4"},[a("div",{staticClass:"col"},[a("h2",[t._v("Titolo => "),a("span",[t._v(t._s(t.painting.title.toUpperCase()))])])])]),a("div",{staticClass:"row p-4"},[a("div",{staticClass:"col"},[a("h2",[t._v("File Immagine => ")]),a("div",{staticClass:"d-flex justify-content-center"},[null!=t.painting.imageDataBase64?a("img",{attrs:{alt:t.painting.title,src:t.painting.imageDataBase64},on:{error:function(a){return t.handleImageError(t.painting)}}}):t._e()])])]),null!=t.painting.details&&this.painting.details.length>0?a("div",{staticClass:"row p-4"},t._l(t.painting.details,(function(e,s){return a("div",{key:s,staticClass:"col"},[a("h2",[t._v("Dettaglio "+t._s(s+1)+" => ")]),a("div",{staticClass:"d-flex justify-content-center"},[a("img",{attrs:{alt:e.name,src:e.imageBase64}})])])})),0):t._e(),a("div",{staticClass:"row p-4"},[a("div",{staticClass:"col"},[a("h2",[t._v("Misure => "),a("span",[t._v(t._s(t.painting.size))])])])]),a("div",{staticClass:"row p-4"},[a("div",{staticClass:"col"},[a("h2",[t._v("Anno => "),a("span",[t._v(t._s(t.painting.year))])])])]),a("div",{staticClass:"row p-4"},[a("div",{staticClass:"col"},[a("h2",[t._v("Descrizione => "),a("span",[t._v(t._s(t.painting.description))])])])]),a("div",{staticClass:"row p-4"},[a("div",{staticClass:"col"},[a("h2",[t._v("Slug => "),a("span",[t._v(t._s(t.painting.slug))])])])])]),t.errorProp?a("div",{staticClass:"alert-danger text-center"},[a("h3",[t._v("Impossibile visualizzare il quadro selezionato, tornare alla Dashboard e riprovare.")])]):t._e(),t.delatedSucces?a("div",{staticClass:"alert-success text-center"},[a("h3",[t._v("Eliminazione avvenuta con successo")])]):t._e()])},i=[],n=e(908),r=e(188),o={name:"ReadPainting",components:{Loader:r.Z},data(){return{painting:null,errorProp:!1,delatedSucces:!1}},computed:{currentUser(){return this.$store.state.auth.user}},created(){null!=this.$route.params.slug?this.loadData(this.$route.params.slug):this.errorProp=!0},mounted(){this.currentUser||this.$router.push("/admin/login")},methods:{loadData(t){n.Z.getSinglePainting(t).then((t=>{this.painting=t.data.payload}),(t=>{console.log("Errore:",t),t.response&&403===t.response.status&&(this.$store.dispatch("auth/logout"),this.$router.push("/admin/login"))}))},shareData(t,a){this.$router.push({name:a,params:{slug:t.slug}})},deleteSelectedPainting(t){n.Z.delete(t).then((t=>{this.delatedPainting=t.data.payload,this.delatedSucces=!0}),(t=>{console.log("Errore:",t),t.response&&403===t.response.status&&(this.$store.dispatch("auth/logout"),this.$router.push("/admin/login"))}))},handleImageError(t){t.img="http://drive.google.com/uc?export=view&id=1ZpJCY7ijNY1oO1mvGMl2gnOcaIXyGM3n"}}},l=o,d=e(1),c=(0,d.Z)(l,s,i,!1,null,null,null),u=c.exports},908:function(t,a,e){var s=e(121),i=e(8);const n="http://54.237.136.155:8080/api/admin/";class r{newPainting(t){return""!==t.title&&t.year>=1993&&t.year<=2199?s.Z.post(n+"addPainting",t,{headers:(0,i.Z)()}):Promise.reject("I dati del quadro non sono validi. Il titolo e l'anno non possono essere vuoti.")}getDashboard(t,a){return s.Z.get(`${n}dashboard?pageNumber=${t}&pageSize=${a}`,{headers:(0,i.Z)()})}getSinglePainting(t){return s.Z.get(`${n}single-view?slug=${t}`,{headers:(0,i.Z)()})}update(t){return""!==t.title&&t.year>=1993&&t.year<=2199?s.Z.put(n+"update",t,{headers:(0,i.Z)()}):Promise.reject("I dati del quadro non sono validi.")}delete(t){if(null!=t.slug)return s.Z.delete(n+"delete",{data:t,headers:(0,i.Z)()})}}a.Z=new r}}]);
//# sourceMappingURL=507.f93d4217.js.map