{"version":3,"file":"js/783.576ea80e.js","mappings":"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","sources":["webpack:///./src/components/auth/views/paintingCrud/Dashboard.vue","webpack:///src/components/auth/views/paintingCrud/Dashboard.vue","webpack:///./src/components/auth/views/paintingCrud/Dashboard.vue?fe72","webpack:///./src/components/auth/views/paintingCrud/Dashboard.vue?e85d","webpack:///./src/services/painting.service.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container-fluid\"},[_c('div',{staticClass:\"row p-4\"},[_vm._m(0),(_vm.delatedSucces && _vm.delatedPainting != null)?_c('div',{staticClass:\"col alert-success text-center\"},[_c('h5',[_vm._v(\"Il quadro \"+_vm._s(_vm.delatedPainting.title)+\" è stato eliminato con successo!\")])]):_vm._e(),_c('div',{staticClass:\"col d-flex justify-content-end\"},[_c('router-link',{staticClass:\"me-4\",attrs:{\"to\":\"/admin/new-painting/create\"}},[_c('button',{staticClass:\"btn btn-success\",attrs:{\"type\":\"button\"}},[_vm._v(\"Aggiungi quadro\")])])],1)]),_c('table',{staticClass:\"table\"},[_vm._m(1),_c('tbody',_vm._l((_vm.paintings),function(painting,i){return _c('tr',{key:i},[_c('th',{attrs:{\"scope\":\"row\"}},[_vm._v(_vm._s(painting.id))]),_c('td',[_vm._v(_vm._s(painting.title))]),_c('td',[_vm._v(_vm._s(painting.size))]),_c('td',[_vm._v(_vm._s(painting.year))]),_c('td',[_vm._v(_vm._s(painting.slug))]),_c('td',{staticClass:\"d-flex justify-content-end pe-3\"},[_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.shareData(painting, 'admin-painting-single')}}},[_vm._v(\"Visualizza\")]),_c('button',{staticClass:\"btn btn-warning mx-4\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.shareData(painting, 'admin-painting-update')}}},[_vm._v(\"Modifica\")]),_c('button',{staticClass:\"btn btn-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.deleteSelectedPainting(painting)}}},[_vm._v(\"Elimina\")])])])}),0)]),_c('div',{staticClass:\"pages p-4\"},_vm._l((_vm.pages),function(pageNumber){return _c('a',{key:pageNumber,staticClass:\"mx-2\",on:{\"click\":function($event){return _vm.handlePageClick(pageNumber, _vm.pageSize)}}},[_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\"}},[_vm._v(_vm._s(pageNumber))])])}),0)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col\"},[_c('h3',[_vm._v(\"Questa è la tua dashboard\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('thead',[_c('tr',[_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Id\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Title\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Size\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Year\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Slug\")]),_c('th',{staticClass:\"d-flex justify-content-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Azioni\")])])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"container-fluid\">\r\n        <div class=\"row  p-4\">\r\n            <div class=\"col\">\r\n                <h3>Questa è la tua dashboard</h3>\r\n            </div>\r\n            <div v-if=\"delatedSucces && delatedPainting != null\" class=\"col alert-success text-center\">\r\n                <h5>Il quadro {{ delatedPainting.title }} è stato eliminato con successo!</h5>\r\n            </div>\r\n            <div class=\"col d-flex justify-content-end\">\r\n                <router-link to=\"/admin/new-painting/create\" class=\"me-4\">\r\n                    <button type=\"button\" class=\"btn btn-success\">Aggiungi quadro</button>\r\n                </router-link>\r\n            </div>\r\n        </div>\r\n        <table class=\"table\">\r\n            <thead>\r\n                <tr>\r\n                    <th scope=\"col\">Id</th>\r\n                    <th scope=\"col\">Title</th>\r\n                    <th scope=\"col\">Size</th>\r\n                    <th scope=\"col\">Year</th>\r\n                    <th scope=\"col\">Slug</th>\r\n                    <th scope=\"col\" class=\"d-flex justify-content-center\">Azioni</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr v-for=\"painting, i in paintings\" :key=\"i\">\r\n                    <th scope=\"row\">{{ painting.id }}</th>\r\n                    <td>{{ painting.title }}</td>\r\n                    <td>{{ painting.size }}</td>\r\n                    <td>{{ painting.year }}</td>\r\n                    <td>{{ painting.slug }}</td>\r\n                    <td class=\"d-flex justify-content-end pe-3\">\r\n                        <button @click=\"shareData(painting, 'admin-painting-single')\" type=\"button\" class=\"btn btn-primary\">Visualizza</button>\r\n\r\n                        <button @click=\"shareData(painting, 'admin-painting-update')\" type=\"button\" class=\"btn btn-warning mx-4\">Modifica</button>\r\n\r\n                        <button @click=\"deleteSelectedPainting(painting)\" type=\"button\" class=\"btn btn-danger\">Elimina</button>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class=\"pages p-4\">\r\n            <a class=\"mx-2\" v-for=\"pageNumber in pages\" :key=\"pageNumber\" @click=\"handlePageClick(pageNumber, pageSize)\">\r\n                <button type=\"button\" class=\"btn btn-primary\">{{ pageNumber }}</button>\r\n            </a>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport PaintingService from '../../../../services/painting.service';\r\n\r\nexport default {\r\n    name: 'Dashboard',\r\n    data() {\r\n        return {\r\n            paintings: [],\r\n            pages: 0,\r\n            pageSize: 6,\r\n            currentPage: 1,\r\n            delatedPainting: null,\r\n            delatedSucces: false\r\n        }\r\n    },\r\n    computed: {\r\n        currentUser() {\r\n            return this.$store.state.auth.user;\r\n        }\r\n    },\r\n    mounted() {\r\n        if (!this.currentUser) {\r\n            this.$router.push('/admin/login');\r\n        }\r\n    },\r\n    created() {\r\n        this.loadData(this.currentPage - 1, this.pageSize); // Carica i dati per la pagina 0 all'avvio\r\n    },\r\n    methods: {\r\n        loadData(pageNumber, pageSize) {\r\n            PaintingService.getDashboard(pageNumber, pageSize).then(\r\n                response => {\r\n                    this.paintings = response.data.payload;\r\n                    if (this.paintings && this.paintings.length > 0) {\r\n                        this.pages = this.paintings[0].totPages;\r\n                    }else if (this.currentPage !== 1 && this.currentPage >= this.pages) {\r\n                        this.getPageData(this.currentPage - 1, this.pageSize);\r\n                    }\r\n                },\r\n                error => {\r\n                    console.log('Errore:', error);\r\n                    if (error.response && error.response.status === 403) {\r\n                        this.$store.dispatch('auth/logout');\r\n                        this.$router.push('/admin/login');\r\n                    }\r\n                }\r\n            );\r\n        },\r\n        handlePageClick(pageNumber, pageSize) {\r\n            // Chiamare i metodi che desideri al click\r\n            this.getPageData(pageNumber, pageSize);\r\n            this.clearDeleteInfo();\r\n        },\r\n        getPageData(pageNumber, pageSize) {\r\n            this.currentPage = pageNumber;\r\n            this.loadData(pageNumber - 1, pageSize); // Carica i dati per la pagina selezionata\r\n        },\r\n        clearDeleteInfo(){\r\n            this.delatedSucces = false\r\n        },\r\n        // passaggio dati tramite vuex e params\r\n        shareData(data, routeName) {\r\n            // this.$store.commit('painting/setSelectedPainting', data);\r\n            // localStorage.setItem('selectedPainting', JSON.stringify(data));\r\n            this.$router.push({\r\n                name: routeName,\r\n                params: { \r\n                    slug: data.slug\r\n                }\r\n            });\r\n        },\r\n\r\n        deleteSelectedPainting(painting){\r\n            PaintingService.delete(painting).then(\r\n                response => {\r\n                    this.delatedPainting = response.data.payload;\r\n                    this.delatedSucces = true;\r\n                    this.getPageData(this.currentPage, this.pageSize);\r\n                },\r\n                error => {\r\n                    console.log('Errore:', error);\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.container-fluid{\r\n    height: 90vh;\r\n}\r\n.pages{\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 50%;\r\n    transform: translate(-50%);\r\n}\r\n</style>","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Dashboard.vue?vue&type=template&id=219a76cf\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js\"\nimport style0 from \"./Dashboard.vue?vue&type=style&index=0&id=219a76cf&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import axios from 'axios';\r\nimport authHeader from './auth-header';\r\n\r\n// const API_URL = 'http://localhost:8080/api/admin/';\r\nconst API_URL = 'https://www.simonetritto.site/api/admin/';\r\naxios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\naxios.defaults.headers.common['Access-Control-Allow-Headers'] = 'Origin, X-Requested-With, Content-Type, Accept';\r\naxios.defaults.withCredentials = false;\r\naxios.defaults.crossDomain = true;\r\n\r\nclass PaintingService {\r\n    newPainting(painting){\r\n        if (\r\n            painting.title !== '' && // Aggiunto controllo sull'input non vuoto\r\n            painting.year >= 1993 &&\r\n            painting.year <= 2199\r\n        ) {\r\n            return axios.post(API_URL + 'addPainting', painting, { headers: authHeader()});\r\n        } else {\r\n            return Promise.reject(\"I dati del quadro non sono validi. Il titolo e l'anno non possono essere vuoti.\");\r\n        }\r\n    }\r\n\r\n    getDashboard(pageNumber, pageSize) {\r\n        return axios.get(`${API_URL}dashboard?pageNumber=${pageNumber}&pageSize=${pageSize}`, { headers: authHeader() });\r\n    }\r\n\r\n    getSinglePainting(slug) {\r\n        return axios.get(`${API_URL}single-view?slug=${slug}`, { headers: authHeader() });\r\n    }\r\n\r\n    update(painting){    \r\n        if (\r\n            painting.title !== '' && // Aggiunto controllo sull'input non vuoto\r\n            painting.year >= 1993 &&\r\n            painting.year <= 2199\r\n        ) {\r\n            return axios.put(API_URL + 'update', painting, { headers: authHeader() });\r\n        } else {\r\n            return Promise.reject(\"I dati del quadro non sono validi.\");\r\n        }\r\n    }\r\n\r\n    delete(painting){\r\n        if(painting.slug != null){\r\n            return axios.delete(API_URL + 'delete', { data: painting, headers: authHeader() });\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default new PaintingService();"],"names":["render","_vm","this","_c","_self","staticClass","_m","delatedSucces","delatedPainting","_v","_s","title","_e","attrs","_l","paintings","painting","i","key","id","size","year","slug","on","$event","shareData","deleteSelectedPainting","pages","pageNumber","handlePageClick","pageSize","staticRenderFns","name","data","currentPage","computed","currentUser","$store","state","auth","user","mounted","$router","push","created","loadData","methods","PaintingService","getDashboard","then","response","payload","length","totPages","getPageData","error","console","log","status","dispatch","clearDeleteInfo","routeName","params","delete","component","API_URL","axios","defaults","headers","common","withCredentials","crossDomain","newPainting","post","authHeader","Promise","reject","get","getSinglePainting","update","put"],"sourceRoot":""}