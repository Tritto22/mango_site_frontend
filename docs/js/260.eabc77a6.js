"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[260],{260:function(e,s,a){a.r(s),a.d(s,{default:function(){return l}});var t=function(){var e=this,s=e._self._c;return s("div",{staticClass:"container"},[s("h1",[e._v("MODIFICA")]),s("form",{attrs:{name:"form"},on:{submit:function(s){return s.preventDefault(),e.handleUpdate.apply(null,arguments)}}},[e.successful?e._e():s("div",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"username"}},[e._v("Username")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.updateUser.username,expression:"updateUser.username"},{name:"validate",rawName:"v-validate",value:"required|min:3|max:20",expression:"'required|min:3|max:20'"}],staticClass:"form-control",attrs:{type:"username",id:"username",name:"username"},domProps:{value:e.updateUser.username},on:{input:function(s){s.target.composing||e.$set(e.updateUser,"username",s.target.value)}}}),e.submitted&&e.errors.has("username")?s("div",{staticClass:"alert-danger"},[e._v(e._s(e.errors.first("username")))]):e._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[e._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.updateUser.email,expression:"updateUser.email"},{name:"validate",rawName:"v-validate",value:"required|email|max:50",expression:"'required|email|max:50'"}],staticClass:"form-control",attrs:{type:"email",id:"email",name:"email"},domProps:{value:e.updateUser.email},on:{input:function(s){s.target.composing||e.$set(e.updateUser,"email",s.target.value)}}}),e.submitted&&e.errors.has("email")?s("div",{staticClass:"alert-danger"},[e._v(e._s(e.errors.first("email")))]):e._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[e._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.updateUser.password,expression:"updateUser.password"},{name:"validate",rawName:"v-validate",value:"required|min:6|max:40",expression:"'required|min:6|max:40'"}],staticClass:"form-control",attrs:{type:"password",id:"password",name:"password"},domProps:{value:e.updateUser.password},on:{input:function(s){s.target.composing||e.$set(e.updateUser,"password",s.target.value)}}}),e.submitted&&e.errors.has("password")?s("div",{staticClass:"alert-danger"},[e._v(e._s(e.getErrorMessage("password")))]):e._e()]),e._m(0)])]),e.message?s("div",{staticClass:"alert",class:e.successful?"alert-success":"alert-danger"},[e._v(" "+e._s(e.message)+" "),s("router-link",{attrs:{to:"/admin"}},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[e._v("Home")])])],1):e._e()])},r=[function(){var e=this,s=e._self._c;return s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Modifica")])])}],i=a(629),u={name:"UserUpdate",data(){return{updateUser:{username:"",email:"",password:""},submitted:!1,successful:!1,message:""}},computed:{currentUser(){return this.$store.state.auth.user},...(0,i.rn)("auth",["user"])},mounted(){this.currentUser||this.$router.push("/admin/login")},watch:{user:{handler(e){e&&e.username&&e.username&&e.email&&(this.updateUser.username=e.username,this.updateUser.email=e.email)},immediate:!0}},methods:{handleUpdate(){this.message="",this.submitted=!0,this.$validator.validate().then((e=>{e&&this.$store.dispatch("auth/update",this.updateUser).then((e=>{null!=e.payload&&(this.$store.dispatch("auth/logout"),this.message="Modifica avvenuta con successo, ora effettua nuovamente il login",this.successful=!0)}),(e=>{this.message=e.response&&e.response.data||e.message||e.toString(),this.successful=!1}))}))},getErrorMessage(e){return"password"===e&&this.submitted&&this.errors.has("password")?"Inserisci la vecchia password oppure una nuova con minimo 6 e massimo 40!":this.errors.first(e)}}},n=u,o=a(1),m=(0,o.Z)(n,t,r,!1,null,null,null),l=m.exports}}]);
//# sourceMappingURL=260.eabc77a6.js.map