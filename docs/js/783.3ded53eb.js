"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[783],{783:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row p-4"},[t._m(0),t.delatedSucces&&null!=t.delatedPainting?e("div",{staticClass:"col alert-success text-center"},[e("h5",[t._v("Il quadro "+t._s(t.delatedPainting.title)+" Ã¨ stato eliminato con successo!")])]):t._e(),e("div",{staticClass:"col d-flex justify-content-end"},[e("router-link",{staticClass:"me-4",attrs:{to:"/admin/new-painting/create"}},[e("button",{staticClass:"btn btn-success",attrs:{type:"button"}},[t._v("Aggiungi quadro")])])],1)]),e("table",{staticClass:"table"},[t._m(1),e("tbody",t._l(t.paintings,(function(a,s){return e("tr",{key:s},[e("th",{attrs:{scope:"row"}},[t._v(t._s(a.id))]),e("td",[t._v(t._s(a.title))]),e("td",[t._v(t._s(a.size))]),e("td",[t._v(t._s(a.year))]),e("td",[t._v(t._s(a.slug))]),e("td",{staticClass:"d-flex justify-content-end pe-3"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.shareData(a,"admin-painting-single")}}},[t._v("Visualizza")]),e("button",{staticClass:"btn btn-warning mx-4",attrs:{type:"button"},on:{click:function(e){return t.shareData(a,"admin-painting-update")}}},[t._v("Modifica")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.deleteSelectedPainting(a)}}},[t._v("Elimina")])])])})),0)]),e("div",{staticClass:"pages p-4"},t._l(t.pages,(function(a){return e("a",{key:a,staticClass:"mx-2",on:{click:function(e){return t.handlePageClick(a,t.pageSize)}}},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[t._v(t._s(a))])])})),0)])},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col"},[e("h3",[t._v("Questa Ã¨ la tua dashboard")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("Id")]),e("th",{attrs:{scope:"col"}},[t._v("Title")]),e("th",{attrs:{scope:"col"}},[t._v("Size")]),e("th",{attrs:{scope:"col"}},[t._v("Year")]),e("th",{attrs:{scope:"col"}},[t._v("Slug")]),e("th",{staticClass:"d-flex justify-content-center",attrs:{scope:"col"}},[t._v("Azioni")])])])}],i=a(908),r={name:"Dashboard",data(){return{paintings:[],pages:0,pageSize:6,currentPage:1,delatedPainting:null,delatedSucces:!1}},computed:{currentUser(){return this.$store.state.auth.user}},mounted(){this.currentUser||this.$router.push("/admin/login")},created(){this.loadData(this.currentPage-1,this.pageSize)},methods:{loadData(t,e){i.Z.getDashboard(t,e).then((t=>{this.paintings=t.data.payload,this.paintings&&this.paintings.length>0?this.pages=this.paintings[0].totPages:1!==this.currentPage&&this.currentPage>=this.pages&&this.getPageData(this.currentPage-1,this.pageSize)}),(t=>{console.log("Errore:",t),t.response&&403===t.response.status&&(this.$store.dispatch("auth/logout"),this.$router.push("/admin/login"))}))},handlePageClick(t,e){this.getPageData(t,e),this.clearDeleteInfo()},getPageData(t,e){this.currentPage=t,this.loadData(t-1,e)},clearDeleteInfo(){this.delatedSucces=!1},shareData(t,e){this.$router.push({name:e,params:{slug:t.slug}})},deleteSelectedPainting(t){i.Z.delete(t).then((t=>{this.delatedPainting=t.data.payload,this.delatedSucces=!0,this.getPageData(this.currentPage,this.pageSize)}),(t=>{console.log("Errore:",t)}))}}},l=r,o=a(1),c=(0,o.Z)(l,s,n,!1,null,null,null),u=c.exports},908:function(t,e,a){var s=a(121),n=a(8);const i="http://54.237.136.155:8080/api/admin/";class r{newPainting(t){return""!==t.title&&t.year>=1993&&t.year<=2199?s.Z.post(i+"addPainting",t,{headers:(0,n.Z)()}):Promise.reject("I dati del quadro non sono validi. Il titolo e l'anno non possono essere vuoti.")}getDashboard(t,e){return s.Z.get(`${i}dashboard?pageNumber=${t}&pageSize=${e}`,{headers:(0,n.Z)()})}getSinglePainting(t){return s.Z.get(`${i}single-view?slug=${t}`,{headers:(0,n.Z)()})}update(t){return""!==t.title&&t.year>=1993&&t.year<=2199?s.Z.put(i+"update",t,{headers:(0,n.Z)()}):Promise.reject("I dati del quadro non sono validi.")}delete(t){if(null!=t.slug)return s.Z.delete(i+"delete",{data:t,headers:(0,n.Z)()})}}e.Z=new r}}]);
//# sourceMappingURL=783.3ded53eb.js.map